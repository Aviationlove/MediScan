<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MediScan | Grad-CAM Visualization</title>
  <meta name="description" content="Explore how our AI visualizes and identifies bone fractures using Grad-CAM technology">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            blue: {
              50: '#EAEFFF',
              100: '#D5DEFF',
              200: '#B3C5FF',
              300: '#89A8FF',
              400: '#5E7BFE',
              500: '#0062FF',
              600: '#0048c2',
              700: '#003494',
              800: '#002266',
              900: '#001133',
            },
            cyan: {
              400: '#00D1FF',
              500: '#00A0FF',
            },
            gray: {
              50: '#F5F7FF',
              800: '#15173D',
              600: '#596080',
            },
            red: {
              500: '#FF3939',
              400: '#FF6B6B'
            }
          },
          fontFamily: {
            sans: ['Inter', 'sans-serif'],
          },
          animation: {
            'float': 'float 8s ease-in-out infinite',
            'pulse': 'pulse 1.5s infinite'
          },
          keyframes: {
            float: {
              '0%, 100%': { transform: 'translateY(0) rotateY(0)' },
              '50%': { transform: 'translateY(-15px) rotateY(3deg)' },
            },
            pulse: {
              '0%': { transform: 'scale(0.9)', opacity: 0.7 },
              '50%': { transform: 'scale(1.1)', opacity: 0.3 },
              '100%': { transform: 'scale(0.9)', opacity: 0.7 },
            }
          }
        }
      }
    }
  </script>
  <style>
    /* Fix for timeline mobile view */
    @media (max-width: 768px) {
      .timeline-item {
        margin-left: 3.5rem;
        position: relative;
        padding-bottom: 2rem;
      }
      
      .timeline-item h3 {
        padding-right: 0;
        text-align: left;
        padding-top: 0.5rem;
      }
      
      .timeline-item .absolute {
        left: -3.5rem !important;
      }
    }

    /* Timeline mobile responsiveness fixes */
    @media (max-width: 768px) {
      /* Fix for timeline items on mobile */
      .timeline-item {
        padding-left: 4rem;
        position: relative;
        padding-bottom: 2.5rem;
      }
      
      /* Ensure text aligns properly on mobile */
      .timeline-item h3 {
        text-align: left;
        padding-right: 0;
        padding-left: 0;
        display: block;
      }
      
      /* Fix icon circles positioning on mobile */
      .timeline-item .absolute {
        left: 0 !important;
        transform: translateX(0) !important;
        margin-left: 0 !important;
      }
      
      /* Text alignment for all items on mobile */
      .timeline-item [class*="col-start-"] {
        padding-left: 0;
      }
      
      .timeline-item [class*="pr-"] {
        padding-right: 0;
        text-align: left;
      }
    }
  </style>
</head>
<body class="bg-white text-gray-800 font-sans">
  <!-- HEADER -->
  <div id="nav-placeholder"></div>

  <!-- MAIN CONTENT -->
  <main>
    <!-- 3D Interactive Hero Section -->
    <section class="h-screen flex items-center relative overflow-hidden">
      <!-- Background elements -->
      <div class="absolute inset-0 bg-[radial-gradient(circle_at_70%_60%,rgba(0,209,255,0.03)_0%,transparent_40%),radial-gradient(circle_at_30%_40%,rgba(0,98,255,0.05)_0%,transparent_50%)]"></div>
      
      <!-- Wave at bottom -->
      <div class="absolute bottom-0 left-0 w-full h-[15vh] bg-[url('data:image/svg+xml;charset=utf8,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 1440 320%22 preserveAspectRatio=%22none%22%3E%3Cpath fill=%22%23F5F7FF%22 fill-opacity=%221%22 d=%22M0,224L48,202.7C96,181,192,139,288,138.7C384,139,480,181,576,186.7C672,192,768,160,864,170.7C960,181,1056,235,1152,240C1248,245,1344,203,1392,181.3L1440,160L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z%22%3E%3C/path%3E%3C/svg%3E')] bg-cover bg-no-repeat z-10"></div>
      
      <div class="max-w-7xl mx-auto px-4 w-full grid lg:grid-cols-12 gap-16 items-center relative z-20">
        <!-- Content Column -->
        <div class="lg:col-span-5">
          <h1 class="text-4xl md:text-5xl font-extrabold mb-6 bg-gradient-to-br from-gray-800 to-blue-500 bg-clip-text text-transparent leading-tight">Visualizing the Unseen</h1>
          <p class="text-gray-600 text-lg mb-10 leading-relaxed">
            Grad-CAM technology makes AI-based fracture detection transparent by creating visual heatmaps that highlight exactly where our algorithm detects potential fractures in X-ray images.
          </p>
          <a href="#explore" class="inline-flex items-center px-8 py-3 bg-gradient-to-r from-blue-500 to-blue-700 text-white font-semibold rounded-lg shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all duration-300">
            <i class="fas fa-eye mr-2"></i> Explore Technology
          </a>
        </div>
        
        <!-- Visual Column -->
        <div class="lg:col-span-7 relative pb-[90%] lg:pb-0 lg:h-[500px] perspective-1000">
          <div id="visual-container" class="absolute w-4/5 h-4/5 top-[5%] left-[10%] preserve-3d animate-float">
            <!-- X-ray image (front) -->
            <div class="visual-xray absolute inset-0 rounded-xl shadow-2xl transition-all duration-600 z-20 bg-gray-50 overflow-hidden">
              <img src="./images/wrist-xray.jpg" alt="Wrist X-ray" class="w-full h-full object-cover scale-105" 
                   onerror="this.src='https://images.unsplash.com/photo-1583774198559-21876a208a23?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=600&q=80'">
            </div>
            
            <!-- Grad-CAM image (back) -->
            <div class="visual-gradcam absolute inset-0 rounded-xl shadow-2xl transition-all duration-600 z-10 bg-gray-50 overflow-hidden transform -translate-z-5 rotateY-180">
              <img src="./images/wrist-gradcam.jpg" alt="Wrist X-ray with Grad-CAM visualization" class="w-full h-full object-cover scale-105"
                   onerror="this.src='https://images.unsplash.com/photo-1583774198559-21876a208a23?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=600&q=80'">
            </div>
          </div>
          
          <!-- Controls -->
          <div class="absolute bottom-[2%] left-0 w-full flex justify-center z-50">
            <button id="flip-visual" class="px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-700 text-white font-semibold rounded-full shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all duration-300 flex items-center gap-3 relative overflow-hidden">
              <span class="relative z-10"><i class="fas fa-sync-alt"></i> Toggle Heatmap View</span>
              <span class="absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full hover:translate-x-full transition-transform duration-700 z-0"></span>
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- What is Grad-CAM Section -->
    <section id="explore" class="py-24 bg-gray-50">
      <div class="max-w-7xl mx-auto px-4">
        <div class="max-w-3xl mx-auto text-center mb-16">
          <div class="flex items-center justify-center mb-4 text-blue-500 text-sm font-semibold uppercase tracking-wider">
            <span class="w-8 h-0.5 bg-blue-500"></span>
            <span class="mx-3">Understanding AI Vision</span>
            <span class="w-8 h-0.5 bg-blue-500"></span>
          </div>
          <h2 class="text-4xl font-bold mb-5">What is Grad-CAM?</h2>
          <p class="text-gray-600 text-lg">
            Gradient-weighted Class Activation Mapping (Grad-CAM) is a technique that produces visual explanations for decisions made by convolutional neural networks, making AI diagnosis transparent and interpretable.
          </p>
        </div>
        
        <!-- Timeline-based process flow -->
        <div class="max-w-4xl mx-auto relative py-8">
          <!-- Timeline center line -->
          <div class="absolute top-0 left-1/2 h-full w-1 bg-gradient-to-b from-transparent via-blue-500 to-transparent transform -translate-x-1/2 rounded-full hidden md:block"></div>
          
          <!-- Timeline items -->
          <div class="timeline-item opacity-0 translate-y-8 transition-all duration-800 relative mb-24 md:grid md:grid-cols-2 md:items-center">
            <div class="md:pr-16 text-left md:text-right">
              <h3 class="text-xl font-semibold mb-3 text-gray-800 relative inline-block md:after:content-[''] md:after:absolute md:after:bottom-[-5px] md:after:right-0 md:after:w-10 md:after:h-[3px] md:after:bg-gradient-to-l md:after:from-blue-500 md:after:to-transparent">X-ray Analysis</h3>
              <p class="text-gray-600">
                The X-ray image is processed through multiple convolutional layers of our deep neural network, extracting key features and patterns that could indicate a fracture.
              </p>
            </div>
            
            <!-- Timeline circle - mobile adjusted positioning -->
            <div class="absolute left-0 md:left-1/2 top-0 w-14 h-14 flex items-center justify-center z-10 transform md:translate-y-0 -translate-y-1/2 md:-ml-7">
              <div class="w-14 h-14 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 shadow-[0_0_15px_rgba(0,98,255,0.3)] flex items-center justify-center text-white text-xl">
                <i class="fas fa-upload"></i>
              </div>
            </div>
          </div>

          <div class="timeline-item opacity-0 translate-y-8 transition-all duration-800 relative mb-24 md:grid md:grid-cols-2 md:items-center">
            <div class="md:col-start-2 md:pl-16 pl-16">
              <h3 class="text-xl font-semibold mb-3 text-gray-800 relative inline-block after:content-[''] after:absolute after:bottom-[-5px] after:left-0 after:w-10 after:h-[3px] after:bg-gradient-to-r after:from-blue-500 after:to-transparent">Feature Detection</h3>
              <p class="text-gray-600">
                Our AI identifies critical patterns and anomalies in bone structure that might indicate fractures or other abnormalities by comparing with thousands of training examples.
              </p>
            </div>
            
            <!-- Timeline circle - mobile adjusted positioning -->
            <div class="absolute left-0 md:left-1/2 top-0 w-14 h-14 flex items-center justify-center z-10 transform md:translate-y-0 -translate-y-1/2 md:-ml-7">
              <div class="w-14 h-14 rounded-full bg-gradient-to-br from-cyan-400 to-blue-500 shadow-[0_0_15px_rgba(0,209,255,0.3)] flex items-center justify-center text-white text-xl">
                <i class="fas fa-search"></i>
              </div>
            </div>
          </div>

          <div class="timeline-item opacity-0 translate-y-8 transition-all duration-800 relative mb-24 md:grid md:grid-cols-2 md:items-center">
            <div class="md:pr-16 text-left md:text-right">
              <h3 class="text-xl font-semibold mb-3 text-gray-800 relative inline-block md:after:content-[''] md:after:absolute md:after:bottom-[-5px] md:after:right-0 md:after:w-10 md:after:h-[3px] md:after:bg-gradient-to-l md:after:from-blue-500 md:after:to-transparent">Gradient Calculation</h3>
              <p class="text-gray-600">
                Grad-CAM calculates the gradients flowing into the final convolutional layer to generate class-specific feature importance maps that highlight decision-making regions.
              </p>
            </div>
            
            <!-- Timeline circle - mobile adjusted positioning -->
            <div class="absolute left-0 md:left-1/2 top-0 w-14 h-14 flex items-center justify-center z-10 transform md:translate-y-0 -translate-y-1/2 md:-ml-7">
              <div class="w-14 h-14 rounded-full bg-gradient-to-br from-blue-400 to-blue-700 shadow-[0_0_15px_rgba(56,81,224,0.3)] flex items-center justify-center text-white text-xl">
                <i class="fas fa-chart-line"></i>
              </div>
            </div>
          </div>

          <div class="timeline-item opacity-0 translate-y-8 transition-all duration-800 relative mb-0 md:grid md:grid-cols-2 md:items-center">
            <div class="md:col-start-2 md:pl-16 pl-16">
              <h3 class="text-xl font-semibold mb-3 text-gray-800 relative inline-block after:content-[''] after:absolute after:bottom-[-5px] after:left-0 after:w-10 after:h-[3px] after:bg-gradient-to-r after:from-blue-500 after:to-transparent">Heatmap Generation</h3>
              <p class="text-gray-600">
                A color-coded visualization overlays the original X-ray, with red areas indicating regions most critical to the diagnosis. This creates a transparent window into the AI's decision process.
              </p>
            </div>
            
            <!-- Timeline circle - mobile adjusted positioning -->
            <div class="absolute left-0 md:left-1/2 top-0 w-14 h-14 flex items-center justify-center z-10 transform md:translate-y-0 -translate-y-1/2 md:-ml-7">
              <div class="w-14 h-14 rounded-full bg-gradient-to-br from-red-400 to-red-500 shadow-[0_0_15px_rgba(255,57,57,0.3)] flex items-center justify-center text-white text-xl">
                <i class="fas fa-fire"></i>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Interactive Comparison Section -->
    <section class="py-24 bg-white">
      <div class="max-w-7xl mx-auto px-4">
        <div class="max-w-3xl mx-auto text-center mb-16">
          <div class="flex items-center justify-center mb-4 text-blue-500 text-sm font-semibold uppercase tracking-wider">
            <span class="w-8 h-0.5 bg-blue-500"></span>
            <span class="mx-3">Interactive Exploration</span>
            <span class="w-8 h-0.5 bg-blue-500"></span>
          </div>
          <h2 class="text-4xl font-bold mb-5">Compare X-rays with Grad-CAM Overlays</h2>
          <p class="text-gray-600 text-lg">
            Slide to compare original X-ray images with their Grad-CAM visualizations and see how our AI identifies potential fracture sites.
          </p>
        </div>
        
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 mt-16">
          <!-- Wrist Comparison -->
          <div>
            <div class="h-[450px] md:h-[400px] relative rounded-2xl overflow-hidden shadow-xl">
              <div class="comparison-wrapper relative w-full h-full overflow-hidden">
                <!-- After image (full width) -->
                <div class="comparison-after absolute inset-0">
                  <img src="./images/wrist-gradcamm.jpg" alt="Wrist X-ray with Grad-CAM" class="w-full h-full object-cover"
                       onerror="this.src='https://images.unsplash.com/photo-1583774198559-21876a208a23?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=600&q=80'">
                </div>
                
                <!-- Before image (adjustable width) -->
                <div class="comparison-before absolute inset-0 w-1/2 overflow-hidden">
                  <img src="./images/wrist-xrayy.jpg" alt="Wrist X-ray" class="w-[200%] h-full object-cover"
                       onerror="this.src='https://images.unsplash.com/photo-1583774198559-21876a208a23?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=600&q=80'">
                </div>
                
                <!-- Drag handle -->
                <div class="comparison-handle absolute top-0 left-1/2 w-1 h-full bg-white z-20 cursor-ew-resize transform -translate-x-1/2">
                  <div class="absolute top-1/2 left-1/2 w-10 h-10 rounded-full bg-white shadow-md transform -translate-x-1/2 -translate-y-1/2 flex items-center justify-center z-30 cursor-ew-resize">
                    <i class="fas fa-arrows-alt-h text-blue-500 text-sm"></i>
                  </div>
                </div>
                
                <!-- Labels -->
                <div class="absolute bottom-5 left-5 py-2 px-4 bg-black/60 text-white text-xs font-semibold rounded-full z-10">Original</div>
                <div class="absolute bottom-5 right-5 py-2 px-4 bg-blue-500/90 text-white text-xs font-semibold rounded-full z-10">Grad-CAM</div>
              </div>
            </div>
            <h3 class="text-xl font-semibold mt-6 mb-2">Distal Radius Fracture</h3>
            <p class="text-gray-600">
              The heatmap clearly highlights the fracture line at the distal radius, an often subtle finding that can be challenging to detect in standard X-rays, especially for non-specialists.
            </p>
          </div>
          
          <!-- Ankle Comparison -->
          <div>
            <div class="h-[450px] md:h-[400px] relative rounded-2xl overflow-hidden shadow-xl">
              <div class="comparison-wrapper relative w-full h-full overflow-hidden">
                <!-- After image (full width) -->
                <div class="comparison-after absolute inset-0">
                  <img src="./images/ankle-gradcam.jpg" alt="Ankle X-ray with Grad-CAM" class="w-full h-full object-cover"
                       onerror="this.src='https://images.unsplash.com/photo-1582719471384-894fbb16e074?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=600&q=80'">
                </div>
                
                <!-- Before image (adjustable width) -->
                <div class="comparison-before absolute inset-0 w-1/2 overflow-hidden">
                  <img src="./images/ankle-xray.jpg" alt="Ankle X-ray" class="w-[200%] h-full object-cover"
                       onerror="this.src='https://images.unsplash.com/photo-1582719471384-894fbb16e074?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=600&q=80'">
                </div>
                
                <!-- Drag handle -->
                <div class="comparison-handle absolute top-0 left-1/2 w-1 h-full bg-white z-20 cursor-ew-resize transform -translate-x-1/2">
                  <div class="absolute top-1/2 left-1/2 w-10 h-10 rounded-full bg-white shadow-md transform -translate-x-1/2 -translate-y-1/2 flex items-center justify-center z-30 cursor-ew-resize">
                    <i class="fas fa-arrows-alt-h text-blue-500 text-sm"></i>
                  </div>
                </div>
                
                <!-- Labels -->
                <div class="absolute bottom-5 left-5 py-2 px-4 bg-black/60 text-white text-xs font-semibold rounded-full z-10">Original</div>
                <div class="absolute bottom-5 right-5 py-2 px-4 bg-blue-500/90 text-white text-xs font-semibold rounded-full z-10">Grad-CAM</div>
              </div>
            </div>
            <h3 class="text-xl font-semibold mt-6 mb-2">Lateral Malleolus Fracture</h3>
            <p class="text-gray-600">
              Grad-CAM visualization reveals a lateral malleolus fracture that might be overlooked due to complex overlapping structures in the ankle joint region.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Dark immersive section -->
    <section class="py-16 bg-gray-800 text-white">
      <div class="max-w-7xl mx-auto px-4 py-8">
        <div class="max-w-3xl mx-auto text-center">
          <div class="flex items-center justify-center mb-4 text-cyan-400 text-sm font-semibold uppercase tracking-wider">
            <span class="w-8 h-0.5 bg-cyan-400"></span>
            <span class="mx-3">Future Developments</span>
            <span class="w-8 h-0.5 bg-cyan-400"></span>
          </div>
          <h2 class="text-4xl font-bold mb-5 bg-gradient-to-r from-white to-white/80 bg-clip-text text-transparent">Where We're Heading</h2>
          <p class="text-gray-300 text-lg mb-8">
            Our team is continuously working to advance Grad-CAM technology to provide even more accurate and detailed visualizations for medical professionals.
          </p>
          <a href="detect.html" class="inline-flex items-center px-8 py-3 bg-white text-blue-600 font-semibold rounded-lg shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all duration-300">
            <i class="fas fa-rocket mr-2"></i> Try MediScan Now
          </a>
        </div>
      </div>
    </section>
  </main>

  <!-- FOOTER -->
  <div id="footer-placeholder"></div>

  <!-- Scripts -->
  <script src="nav-handler.js"></script>
  <script src="footer-handler.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Visual flip effect with enhanced animation
      const flipButton = document.getElementById('flip-visual');
      const visualContainer = document.getElementById('visual-container');
      const visualXray = document.querySelector('.visual-xray');
      const visualGradcam = document.querySelector('.visual-gradcam');
      let isFlipped = false;
      
      if (flipButton && visualContainer) {
        flipButton.addEventListener('click', () => {
          if (!isFlipped) {
            // Show heatmap (flip to Grad-CAM view)
            visualXray.classList.add('transform', '-translate-z-5', 'rotateY-180', 'z-10');
            visualXray.classList.remove('z-20');
            
            visualGradcam.classList.add('z-20');
            visualGradcam.classList.remove('transform', '-translate-z-5', 'rotateY-180', 'z-10');
            
            flipButton.classList.remove('from-blue-500', 'to-blue-700');
            flipButton.classList.add('from-red-400', 'to-red-500');
            flipButton.innerHTML = `
              <span class="relative z-10 flex items-center">
                <span class="inline-block w-3 h-3 bg-white rounded-full mr-2 relative before:content-[''] before:absolute before:w-5 before:h-5 before:-inset-1 before:bg-white/30 before:rounded-full before:animate-pulse"></span>
                <span class="button-icon transform transition-transform duration-500"><i class="fas fa-eye"></i></span> 
                Viewing Heatmap
              </span>
              <span class="absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full hover:translate-x-full transition-transform duration-700 z-0"></span>
            `;
          } else {
            // Show original (flip back to X-ray view)
            visualXray.classList.remove('transform', '-translate-z-5', 'rotateY-180', 'z-10');
            visualXray.classList.add('z-20');
            
            visualGradcam.classList.remove('z-20');
            visualGradcam.classList.add('transform', '-translate-z-5', 'rotateY-180', 'z-10');
            
            flipButton.classList.remove('from-red-400', 'to-red-500');
            flipButton.classList.add('from-blue-500', 'to-blue-700');
            flipButton.innerHTML = `
              <span class="relative z-10"><i class="fas fa-sync-alt"></i> Toggle Heatmap View</span>
              <span class="absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full hover:translate-x-full transition-transform duration-700 z-0"></span>
            `;
          }
          isFlipped = !isFlipped;
        });
      }
      
      // Timeline animation
      const timelineItems = document.querySelectorAll('.timeline-item');
      const observerOptions = {
        root: null,
        rootMargin: '0px',
        threshold: 0.2
      };
      
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.remove('opacity-0', 'translate-y-8');
            entry.target.classList.add('opacity-100', 'translate-y-0');
            observer.unobserve(entry.target);
          }
        });
      }, observerOptions);
      
      timelineItems.forEach(item => {
        observer.observe(item);
      });
      
      // Comparison slider functionality
      const sliders = document.querySelectorAll('.comparison-wrapper');
      
      function initComparison(slider) {
        const handle = slider.querySelector('.comparison-handle');
        const before = slider.querySelector('.comparison-before');
        const sliderWidth = slider.offsetWidth;
        
        function moveSlider(e) {
          let position = e.pageX - slider.getBoundingClientRect().left;
          
          if (position < 0) position = 0;
          if (position > sliderWidth) position = sliderWidth;
          
          const percentage = (position / sliderWidth) * 100;
          
          before.style.width = `${percentage}%`;
          handle.style.left = `${percentage}%`;
        }
        
        handle.addEventListener('mousedown', () => {
          slider.addEventListener('mousemove', moveSlider);
        });
        
        document.addEventListener('mouseup', () => {
          slider.removeEventListener('mousemove', moveSlider);
        });
        
        slider.addEventListener('touchmove', (e) => {
          e.preventDefault();
          let position = e.touches[0].pageX - slider.getBoundingClientRect().left;
          
          if (position < 0) position = 0;
          if (position > sliderWidth) position = sliderWidth;
          
          const percentage = (position / sliderWidth) * 100;
          
          before.style.width = `${percentage}%`;
          handle.style.left = `${percentage}%`;
        });
      }
      
      sliders.forEach(initComparison);
      
      // Window resize event
      window.addEventListener('resize', () => {
        // Re-initialize comparison sliders on window resize
        sliders.forEach(initComparison);
      });
    });
    
    // Add CSS style for 3D transform classes
    const style = document.createElement('style');
    style.textContent = `
      .preserve-3d { transform-style: preserve-3d; }
      .perspective-1000 { perspective: 1000px; }
      .rotateY-180 { transform: rotateY(180deg); }
      .-translate-z-5 { transform: translateZ(-20px); }
    `;
    document.head.appendChild(style);
  </script>
</body>
</html>